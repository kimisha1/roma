<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ROMA Demo</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; max-width: 720px; margin: 40px auto; padding: 0 16px; }
      textarea { width: 100%; min-height: 120px; font-size: 16px; padding: 12px; }
      button { padding: 10px 16px; font-size: 16px; }
      pre { white-space: pre-wrap; word-wrap: break-word; background: #f6f8fa; padding: 12px; border-radius: 8px; }
      .row { display: flex; gap: 12px; align-items: center; }
    </style>
  </head>
  <body>
    <h1>ROMA Agent Demo</h1>
    <p>Enter a prompt and the ROMA agent will respond.</p>
    <textarea id="prompt" placeholder="e.g., Give me 3 fun weekend activities in San Francisco."></textarea>
    <div class="row">
      <button id="run">Run</button>
      <span id="status"></span>
    </div>
    <h3>Result</h3>
    <pre id="result"></pre>
    <script>
      const $ = (id) => document.getElementById(id);
      $('run').addEventListener('click', async () => {
        const prompt = $('prompt').value.trim();
        if (!prompt) { alert('Please enter a prompt'); return; }
        $('status').textContent = 'Running...';
        $('result').textContent = '';
        try {
          const res = await fetch('/api/run', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt })
          });
          const data = await res.json();
          $('result').textContent = data.result ?? JSON.stringify(data, null, 2);
        } catch (e) {
          $('result').textContent = 'Error: ' + (e && e.message ? e.message : e);
        } finally {
          $('status').textContent = '';
        }
      });
    </script>
  </body>
</html>